pipeline{
  agent any
    stages{
    stage('terraform init'){
      steps{
        sh "terraform init"
      }
    }
    stage('terraform plan'){
    steps{
      sh "terraform plan"
      }
     }
    stage('terraform apply'){
      steps{
        echo "$params.VMName"
        sh returnStatus: true, script: 'terraform apply -var name1=('$params.VMName') -auto-approve'
        echo "$params.VMName"
        }
    }
  }
}
